import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.Be8AcK8B.js";const C=({match:s})=>{const r=s.winner===null?"text-white":s.winner.id===s.teamA.id?"text-primary":"text-white",x=s.winner===null?"text-white":s.winner.id===s.teamB.id?"text-primary":"text-white",n=l=>l.charAt(0).toUpperCase()+l.slice(1),p=l=>new Date(l+"T00:00:00-03:00").toLocaleDateString("es-AR",{weekday:"short",month:"short",day:"numeric",timeZone:"America/Argentina/Buenos_Aires"});return e.jsx("div",{className:"text-center mb-8 md:mb-12",children:e.jsxs("div",{className:"border border-border rounded-lg text-left p-4 md:p-6 bg-card",children:[e.jsx("section",{children:e.jsxs("div",{className:"mb-4 flex text-sm font-light justify-between",children:[e.jsx("p",{className:"w-1/3 text-left",children:p(s.date)}),e.jsx("p",{className:"w-1/3 text-center",children:n(s.location.name)}),e.jsxs("p",{className:"w-1/3 text-right",children:[s.time.substr(0,5),"hs"]})]})}),e.jsxs("section",{className:"flex items-center",children:[e.jsxs("div",{id:"teams",children:[e.jsxs("p",{className:`${r}`,children:[n(s.teamA.leftSide.name)," /"," ",n(s.teamA.rightSide.name)]}),e.jsxs("p",{className:`${x}`,children:[n(s.teamB.leftSide.name)," /"," ",n(s.teamB.rightSide.name)]})]}),e.jsxs("div",{className:"ml-2 border-l border-white/30 pl-2",children:[e.jsx("p",{children:s.sets.length==0?0:s.sets[0].gamesTeamA}),e.jsx("p",{children:s.sets.length==0?0:s.sets[0].gamesTeamB})]}),e.jsxs("div",{className:"ml-2 border-l border-white/30 pl-2",children:[e.jsx("p",{children:s.sets.length==0?0:s.sets[1].gamesTeamA}),e.jsx("p",{children:s.sets.length==0?0:s.sets[1].gamesTeamB})]}),e.jsxs("div",{className:"ml-2 border-l border-r pr-2 border-white/30 pl-2",children:[e.jsx("p",{children:s.sets.length==0?0:s.sets[2].gamesTeamA}),e.jsx("p",{children:s.sets.length==0?0:s.sets[2].gamesTeamB})]}),e.jsxs("div",{className:"ml-2 border-l border-white/30 pl-4 font-bold",children:[s.state=="SUSPENDED"&&e.jsx("p",{className:"text-yellow-500 text-xs",children:"SUSPENDIDO"}),s.state=="PENDING"&&e.jsx("p",{className:"text-purple-400 text-xs",children:"Proximo"})]})]})]})})},$=({BASE_URL:s})=>{const[r,x]=a.useState({}),[n,p]=a.useState([]),[l,u]=a.useState([]),[h,w]=a.useState(4),[b,S]=a.useState(0),[o,N]=a.useState("all"),[d,v]=a.useState("all"),[y,j]=a.useState(!0),[g,A]=a.useState(0),[c,T]=a.useState(null),[m,B]=a.useState(null),E=async()=>{try{A(window.scrollY);const t=new URLSearchParams;r.teamAId&&t.append("teamA",r.teamAId),r.teamBId&&t.append("teamB",r.teamBId),o!=="all"&&t.append("location",o),d!=="all"&&t.append("winner",d),t.append("page",0),t.append("size",h);const i=await(await fetch(`${s}/api/matches?${t.toString()}`)).json();p(i.data.content),!c&&i.data.content.length>0&&T(i.data.content[0].teamA),!m&&i.data.content.length>0&&B(i.data.content[0].teamB),S(i.data.totalElements),j(!1),window.scrollTo(0,g)}catch(t){console.error("Error fetching teams:",t)}},I=async()=>{const t=new URLSearchParams(window.location.search);x({teamAId:t.get("teamA"),teamBId:t.get("teamB")})},P=async()=>{try{const f=await(await fetch(`${s}/api/locations`)).json();u(f.data)}catch(t){console.error("Error fetching locations:",t)}};return a.useEffect(()=>{I(),P()},[]),a.useEffect(()=>{window.scrollTo(0,g)},[n]),a.useEffect(()=>{!r.teamAId||!r.teamBId||(j(!0),E())},[r,h,o,d]),y?e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("p",{children:"Cargando..."})}):e.jsxs("section",{className:"px-2",children:[e.jsxs("div",{className:"bg-card/40 p-2 flex justify-end gap-2 md:gap-4 text-xs rounded-lg mb-4",children:[e.jsx("label",{htmlFor:"",children:"Lugar:"}),e.jsxs("select",{value:o,onChange:t=>N(t.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),l.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("label",{htmlFor:"",children:"Ganador:"}),e.jsxs("select",{value:d,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsxs("option",{value:c?.id,children:[c?.leftSide.name," / ",c?.rightSide.name]}),e.jsxs("option",{value:m?.id,children:[m?.leftSide.name," / ",m?.rightSide.name]})]})]}),n.map(t=>e.jsx("div",{className:"match-item",children:e.jsx(C,{match:t})},t.id)),e.jsxs("div",{className:"container px-5 py-2 mx-auto",children:[n.length===0&&e.jsx("div",{className:"text-center",children:e.jsx("p",{children:"Sin resultados"})}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("button",{className:"px-5 py-2  bg-card/50 rounded-xl mb-25 hover:bg-card/70 disabled:opacity-50",onClick:()=>{w(h+4)},disabled:n.length>=b,children:"Ver mÃ¡s"})})]})]})};export{$ as default};
