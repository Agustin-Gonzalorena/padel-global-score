import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{R as f}from"./index.Be8AcK8B.js";const b=({pendingMatch:s,BASE_URL:c})=>{const[i,m]=f.useState("finish"),d=async r=>{r.preventDefault();const n=new FormData(r.target),h=n.get("scoreA"),x=n.get("scoreB"),p=h.split(",").map(Number),u=x.split(",").map(Number),l={results:p.map((t,a)=>({numberSet:a+1,gamesTeamA:t,gamesTeamB:u[a]||0}))};console.log(l);try{const t=await fetch(`${c}/api/matches/${i}/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${document.cookie.split("; ").find(o=>o.startsWith("token="))?.split("=")[1]}`},body:JSON.stringify(l)});if(!t.ok){const o=await t.json();throw console.error("Error response data:",o.message),new Error("Network response was not ok")}const a=await t.json();console.log("Match finished successfully:",a),alert("Datos de partido cargados exitosamente"),window.location.reload()}catch(t){console.log(t),alert("Error finishing match")}};return e.jsxs("div",{children:[e.jsxs("p",{id:"match-info",className:"text-center mt-4 text-sm text-muted-foreground",children:["Ãšltimo partido creado:"," ",e.jsxs("span",{className:"text-white font-bold",children:[new Date(s.date).toLocaleDateString()," -"," ",s.location.name]})]}),e.jsxs("div",{className:"mb-10 flex flex-col gap-4 mt-4 bg-card/50 p-3 rounded-lg",children:[e.jsx("h2",{children:"Cargar resultado"}),e.jsxs("div",{children:[e.jsx("input",{type:"checkBox",id:"suspend-match",name:"suspend-match",onChange:()=>m("suspend")}),e.jsx("label",{htmlFor:"suspend-match",className:"ml-2 text-sm",children:"Suspender partido"})]}),e.jsxs("form",{action:"",id:"form-result",onSubmit:d,className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm font-thin",children:[s.teamA.leftSide.name," /"," ",s.teamA.rightSide.name]}),e.jsx("input",{type:"text",name:"scoreA",id:"scoreA",placeholder:"6,3,6",className:"bg-card p-2 rounded-lg"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("label",{className:"text-sm font-thin",children:[s.teamB.leftSide.name," /"," ",s.teamB.rightSide.name]}),e.jsx("input",{type:"text",name:"scoreB",id:"scoreB",placeholder:"4,6,3",className:"bg-card p-2 rounded-lg"})]}),e.jsx("button",{type:"submit",className:"underline text-md",children:"Cargar"})]})]})]})};export{b as default};
